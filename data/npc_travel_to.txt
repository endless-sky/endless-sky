mission "Test Save and Land (destination)"
	name "T: Safely escort to <planet>"
	description "Keep <npc> alive while you land on <planet>."
	job
	repeat
	to offer
		random < 101
	destination
		distance 1 1
	npc save
		government Merchant
		personality escort target
		land
		fleet "Small Southern Merchants"
		dialog `This dialog shouldn't appear.`
	on fail
		dialog `You failed to save <npc> until it could land.`
	on complete
		dialog `You successfully completed the "npc save" mission with destination system landing.`



mission "Test Land (destination)"
	name "T: Land the escort on <planet>"
	description "Keep <npc> alive while you land on <planet>."
	job
	repeat
	to offer
		random < 101
	destination
		distance 3
	npc land
		government Merchant
		personality escort target
		land
		fleet "Small Southern Merchants"
		dialog `Mission success. Land on <planet> to collect your payment.`
	on fail
		dialog `You failed to get <npc> to its landing target, and it no longer can.`
	on visit
		dialog `The <npc> hasn't landed yet, but still can.`
	on complete
		dialog `You successfully completed the "npc land" mission with destination system landing.`



mission "Test Land (non-destination)"
	name "T: Find the landing target"
	description "Bring <npc> to the correct system so it can land, then return to <planet>. This would be easier with landmarks."
	job
	repeat
	to offer
		random < 101
	destination
		distance 1 1
	npc land
		government Merchant
		personality escort target
		land
			spot1
				distance 1 1
		fleet "Small Southern Merchants"
		dialog `Mission success. Land on <destination> to collect your payment.`
	on fail
		dialog `You failed to save <npc> until it could land.`
	on visit
		dialog `You have not discovered <npc>'s landing target. Take it to nearby systems to discover its location.`
	on complete
		dialog `You successfully completed the "npc land" mission with random system landing.`



mission "Test Kill and Land (waiting)"
	name "T: Intercept the waiting <npc>"
	description "Kill traveling <npc> before it can reach <planet>"
	job
	repeat
	to offer
		random < 101
	destination
		distance 2
	npc kill
		government "Test Dummy"
		personality coward waiting target
		land
		waypoint
		ship "Marauder Falcon (Engines)" "Speed McQueen"
		dialog `You can now complete the mission.`
	on fail
		dialog `You failed to successfully complete the kill mission with a destination system landing and waypoint travel directive. This should happen only if it landed.`
	on visit
		dialog `The <npc> is still alive.`
	on complete
		dialog `You successfully completed the kill mission with a destination system landing and waypoint travel directive. The <npc> should have been waiting for you when you launched.`



mission "Test Kill and Land (entering)"
	name "T: Intercept the entering <npc>"
	description "Kill traveling <npc> before it can reach <planet>"
	job
	repeat
	to offer
		random < 101
	destination
		distance 2
	npc kill
		government "Test Dummy"
		personality coward entering target
		land
		waypoint
		ship "Marauder Falcon (Engines)" "Speed McQueen"
		dialog `You can now complete the mission.`
	on fail
		dialog `You failed to successfully complete the kill mission with a destination system landing and waypoint travel directive. This should happen only if it landed.`
	on visit
		dialog `The <npc> is still alive.`
	on complete
		dialog `You successfully completed the kill mission with a destination system landing and waypoint travel directive. The <npc> should have jumped into your system before beginning its travel plan.`



mission "Test Evade and Land (same system)"
	name "T: Evade + Land at <planet>"
	description "<npc> will land at <planet>, and that will fail this mission as it will not leave the planet."
	job
	repeat
	to offer
		random < 101
	destination
		distance 3 6
	npc evade
		government "Merchant"
		personality pacifist escort target
		land
		ship "Bounder" "Agile Mouse"
		dialog `You have evaded the npc.`
	on fail
		dialog `You failed to evade the <npc>. This can only happen if you let it land on the planet.`
	on visit
		dialog `You have not yet evaded the <npc>.`
	on complete
		dialog `You have successfully completed the evade mission with destination system landing. If you are seeing this but you let the NPC land, then that is a problem, and this test failed.`



mission "Test Evade and Land (diff system)"
	name "T: Evade + Land at not <planet>"
	description "<npc> will land at a random neighboring planet, so lure it there. Killing it will fail this mission."
	job
	repeat
	to offer
		random < 101
	destination
		distance 3 6
	npc evade save
		government "Merchant"
		personality pacifist escort target
		land
			1
				distance 1 1
		ship "Bounder" "Zippy Mouse"
		dialog `You have evaded the npc without killing it.`
	on fail
		dialog `You failed, probably because you killed the npc.`
	on visit
		dialog `You have not yet evaded the <npc>.`
	on complete
		dialog `You successfully completed the evade mission with a non-destination-system landing target. Hopefully you let it land there first, as that actually tests this mission.`



mission "Test Accompany and Land (same planet)"
	name "T: Accompany + Land <planet>"
	description "<npc> will land at <planet>, and that will not fail this mission."
	job
	repeat
	to offer
		random < 101
	destination
		distance 3 6
	npc accompany save
		government "Merchant"
		personality pacifist escort target
		land
		ship "Shuttle" "Friendly Mouse"
		dialog `You should not see this dialog.`
	on fail
		dialog `You failed to accompany the <npc> to <planet> and now cannot.`
	on visit
		dialog `You have landed without the <npc> present.`
	on complete
		dialog `You successfully completed the accompany mission with destination system landing. I hope you let it land here first, but it should not matter if you did or did not.`



mission "Test Accompany and Land (diff system)"
	name "T: Accompany + Land at not <planet>"
	description "<npc> will land at some random planet, and that will fail this mission."
	job
	repeat
	to offer
		random < 101
	destination
		distance 3 6
	npc accompany save
		government "Merchant"
		personality pacifist escort target
		land
			1
				distance 2 4
		ship "Shuttle" "Friendly Rodent"
		dialog `You should not see this dialog.`
	on fail
		dialog `You can no longer land with the <npc>. This should happen if it landed in some other system, or you killed it.`
	on visit
		dialog `You have landed without the <npc> present.`
	on complete
		dialog `You successfully completed the accompany mission with non-destination-system landing. I hope you didn't let it land there, because that should have failed this.`



mission "Test Board and Land"
	name "T: Board + Land at not <planet>"
	description "Board the patrolling <npc>. It will land somewhere, and that will fail this mission if you haven't boarded it yet."
	job
	repeat
	to offer
		random < 101
	destination
		distance 2 4
	npc board
		government "Test Dummy"
		personality nemesis escort target
		system destination
		land
			Makerplace
		patrol
			a
				distance 2 3
			b
				distance 1 2
			c
				distance 1 1
		ship "Marauder Arrow (Engines)" "Escapee"
		dialog `You boarded the required target, and can now complete the mission.`
	on fail
		dialog `You failed to board <npc> before it landed or was destroyed.`
	on visit
		dialog `You have not yet boarded <npc> and it is still possible to do so.`
	on complete
		dialog `You successfully completed the boarding mission with non-destination system land and a patrol route.`



mission "Random Pirates Raid the Hai"
	name "Attackers and Reinforcements"
	description "NPC Travel will route these escorts"
	deadline 20
	job
	repeat
	to offer
		random <= 100
	npc kill
		government Pirate
		personality heroic entering
		fleet "Large Northern Pirates"
	npc
		government Quarg
		personality heroic staying escort
		waypoint "Zuba Zub"
		land "Giverstone"
		system "Hevru Hai"
		ship "Quarg Skylark" "Staying+Land+Travel"
	npc
		government "Free Worlds"
		personality heroic staying escort
		land "Giverstone"
		system "Ya Hai"
		ship "Dreadnought" "Staying+Land_Elsewhere"
	npc
		government Republic
		personality heroic escort
		waypoint "Zuba Zub"
		land "Giverstone"
		system "Rajak"
		ship "Cruiser" "Travel+Land+Children"
		ship "Combat Drone" "e1"
		ship "Combat Drone" "e2"
		ship "Combat Drone" "z1"
		ship "Combat Drone" "z2"
	npc
		government Wanderer
		personality fleeing escort uninterested
		waypoint "Zuba Zub"
		system "Rajak"
		ship "Hurricane" "Fleeing+Travel"
	npc
		government Wanderer
		personality fleeing escort uninterested
		waypoint "Wah Ki"
		land "Giverstone"
		system "Rajak"
		ship "Deep River" "Fleeing+Travel+Land"
	npc
		government Heliarch
		personality fleeing escort uninterested
		patrol
			text1
				near "Ehma Ti" 0 3
				government "Hai (Unfettered)"
			wharble
				government Hai
				near "Wah Ki" 0 1
			c
				distance 1 3
		land "Hai-home"
		system "Rajak"
		ship "Heliarch Interdictor" "Patrolling+Fleeing+Land"
	npc
		government Heliarch
		personality heroic escort uninterested
		patrol "Zuba Zub" "Bore Fah" "Ula Mon"
		visit "Giverstone" "Cloudfire"
		system "Rajak"
		ship "Heliarch Punisher" "Heroically blase"
	npc kill
		government Pirate
		personality coward escort
		waypoint "Zuba Zub"
		land "Giverstone"
		system "Rigel"
		fleet "Large Southern Merchants"
	on fail
		dialog `You failed the pirates raid mission.`
