# Copyright (c) 2017 by Michael Zahniser
# Copyright (c) 2022 by williaji
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.

mission "Remnant: Logistics 1"
	name "Rush delivery to Viminal"
	description `Deliver <cargo> to <destination> by <date>.`
	source "Caelian"
	destination "Viminal"
	cargo "domestic reactors" 30
	deadline 2
	to offer
		has "remnant: blood test pure"
		has "Remnant: Defense 1: done"
		has "cargo space" >= 30
	on offer
		conversation
			`You step out of the <ship> and look again at the strange sight of the <origin> spaceport. You still aren't used to a structure that looks as much like it grew from the landing pads as it was built next to them. The dock side entrance is busy; when your commlink vibrates, you have to find a place where the traffic eddies and you can step aside and learn that you need to check in with the information desk.`			
			`	The woman working the desk seems startled to see you when you walk up. You can see the realization dawn on her as she scans your clothes. "Ah," she sings, "you are the ancestral sojourner among us."`
			`	You are getting used to being gawked at, so you take it in good humor and respond by singing, "The Embers guided me to friends I didn't know, and your message invited me to meet a new one."`
			`	Her hands make a short series of shakes and a moment later she remembers to laugh for you. The delayed response makes her laugh again, spontaneously this time, and you both join in. When she recovers herself, she sings, "Logistics have requested that we find someone who can carry 30 tons of cargo to <planet>. Is the <ship> available immediately?"`
			choice
				`	(Accept the job.)`
					goto willdo
				`	(Decline the job.)`
					goto notinterested
			label willdo
			`	"Certainly," you respond. The job board has been stubbornly empty when you've checked, so a rush job appearing intrigues you.`
			`	"Excellent," she responds in a full alto, "I will let the project manager know the cargo will arrive promptly." She signs what you think is a farewell and turns to address someone else who has stepped up.`
			`	You manage to chant and point your way through the cafeteria line, and you are aware of the flurry of signs around you. There doesn't seem to be a way to pay, so you find a table and sit alone until your commlink chimes to let you know that the <ship> has been refueled and the mystery cargo loaded.`
				accept
			label notinterested
			`	"That is unfortunate," she sings as she makes a notation on her terminal. "But there will be others who are willing to help."`
				decline
	on complete
		payment
		conversation
			`You step off the <ship> in <planet> to see a man wandering around your ship taking video with a datapad and softly dictating some running commentary. He dodges around the dock workers unloading and refueling, seemingly intent on recording every aspect of your ship.`
			`	"Cousin!" he sings with excitement, when you walk up to him. "It is good to meet you and to see your wonderful ship. I've only seen such designs in our historical entertainments." He holds up the datapad facing you and says, I am making a video for my companion. He will not believe me unless I have proof, and maybe not even then!" he laughs. You wave awkwardly at the camera and are relieved when he stops recording.`  
			`	"I hope I have not offended you. I get carried away looking at ships."`
			`	You worry briefly that he is going to interrogate you about the <ship> when he continues, I am named Eon. Would you have time to talk about logistics support?"`
			choice
				`	"Yes, I've been looking for more work with the Remnant."`
					goto opportunities
			label opportunities
			`Eon leads you to the bustling cafeteria, chattering about ship design since the Alpha Wars. He orders a couple of hot drinks and leads you to a table overlooking the docks which is a little quieter. You try your drink. It's strongly flavored but a bit odd. It's probably someone's memory of what coffee should taste like, reconstituted from local foods.`
			`	Eon leaves his untouched as he launches into conversation. "Those of us in logistics have noticed that you are spending time in our systems, and we wanted to see if you would be available to pick up work for us. It would be delivery work like the reactors your brought for the housing project."` 
			choice
				`	"You put reactors in your houses?"`
					goto houses
				`	(Nod to continue.)`
					goto delivery
			label houses
			`	"You do not?" he responds playfully. "We maintain a decentralized power grid so we have more resiliency in the event of an attack or natural disaster. It also makes use of the power plants we salvage from the Korath and ones we recover from our own damaged ships. Besides, widely deploying the technology ensures that we have expertise to maintain and repair it all across the Remnant. But," he signs a pushing motion, "civil engineering is another subject. I hope you are more interested in how we move our various cargoes."`
				goto delivery
			label delivery
			`	You nod to agree and he continues, "Those reactors were originally scheduled for delivery 30 days from now, but they were ready earlier and the project is able the install them now. So, by bringing them over, you have enabled us to move the project forward and free up delivery capacity next month."`
			`	"So, why did you offer this work to me?" you ask, trying to mimic the gestures you've seen that you think refer to one's self.`
			`	He smiles and responds, "Very good! Very good! We schedule everything, but we maintain slack in the system to take advantage of opportunities like the reactors being ready early, or to deal with emergencies. Sometimes, of course, we have to drop everything and sort the schedule out later. But, in normal times, we publish these jobs on the job board and captains that have capacity available can pick them up. The projects provide resource allocations to cover operating and crew costs, but there is no...what is the word? Margin, yes! Since your ship is not in our planned resources, you provide extra capacity, and we might be able to move some of our larger projects forward when you are in our space.`
			choice
				`	"Will your pilots be upset at the competition?"`
					goto competition
				`	"Thanks for the opportunity."`
					goto thanks
			label competition
			`	Eon smiles at the question. "You should talk to the other pilots and see, but I think the ancestral approach is different. We work more like a miltary: the ships are owned by the Remnant, but each captain is responsible for the ship, the crew, and the transport work that needs to be done. I think they will be happy to see new homes being built for   families, and," -he winks at you- "spending more time with their own."`
				goto thanks
			label thanks
			`	Before you can ask more about transport jobs, Eon takes out his commlink and taps on it for a few minutes. "You now have access to the logistics job board. You should be able to see our current job list for each system when you check."`
			`	You chat with Eon about how you've outfitted the <ship> as you finish your...coffee. Then, his commlink chirps. As he stands, he signs what you think means "goodbye" as he says he has to leave for another meeting. He walks off quickly with his head down looking at the datapad. Your commlink notifies you that <payment> have been added to your account.`

trade
	commodity "remnant civil"
		"power distribution controls"
		"sewage treatment modules"
		"road grading and surfacing equipment"
		"modular crane components"
		"high tensile cables"
		"earth moving equipment"
		"heavy machinery tools"
		"high voltage electrical diagnostic equipment"
		"environmental heating and cooling systems"
		"high volume pumps"
		"environmental monitoring and reporting modules"
		"construction robots"
		"construction matrix mixers and extruders"
		"worker housing modules"
		"drilling equipment"
		"waste recycling equipment"
		"civil defense emergency supplies"
		"portable machine shop modules"
		"local network repeaters and uplinks"

mission "Remnant: Logistics Civil Engineering"
	name "Civil delivery to <planet>"
	description `Engineers on <planet> need <cargo> delivered. Logistics adjustment is <payment>.`
	cargo "remnant civil" 30 80
	job
	repeat
	to offer
		not "Remnant: Ssil Vida Active"
		not "flagship planet: Ssil Vida"
		has "Remnant: Logistics 1: done"
		random < 51
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit 
		dialog phrase "generic cargo on visit"
	on complete
		dialog `A project engineer inspects the <cargo> and signs off on your payment of <payment>.`
		payment 10000 15

trade
	commodity "remnant industrial"
		"chemical process equipment"
		"reactor vessels"
		"welding and fabrication robots"
		"air purification systems"
		"water purificaton systems"
		"environmental controls"
		"heating and cooling systems"
		"xenobiologic reactor vessels"
		"catalyst reactors"
		"imaging and integrity scanners"
		"leak detection equipment"
		"liquid stream mixers"
		"quality assurance lab equipment"
		"catalytic reagents"
		"reference isotopes"
		"chemical feedstocks"
		"material handling equipment"
		"liquid and gas stream dryers"
		"heat exchangers"
		"turbines"
		"stainless steel piping"
		"complex alloy piping"
		"radioactive decontamination kits"
		"hazmat suits"
		"oil/chemical spill containment units"
		"mechanical mixers and agitators"
		"sintered metal filters"
		"industrial gases"
		"ultrasonic agitators"

mission "Remnant: Logistics Industrial Delivery"
	name "Industrial delivery to <planet>"
	description `Project teams on <planet> need <cargo> delivered. Logistics adjustment is <payment>.`
	cargo "remnant industrial" 30 300
	job
	repeat
	to offer
		not "Remnant: Ssil Vida Active"
		not "flagship planet: Ssil Vida"
		has "Remnant: Logistics 1: done"
		has "Remnant: Logistics Civil Engineering: done" >= 9
		random < 76
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit 
		dialog phrase "generic cargo on visit"
	on complete
		dialog `A project technician inspects the <cargo> and approves your payment of <payment>.`
		payment 20000 25

trade	
	commodity "remnant outfitter repair"
		"Inhibitor Cannon"
		"Thrasher Cannon"
		"Thrasher Turret"
		"Point Defense Turret"
		"EMP Torpedo Storage Bay"
		"EMP Torpedo Bay"
		"Millennium Cell"
		"Epoch Cell"
		"Aeon Cell"
		"Thermoelectric Cooler"
		"Emergency Ramscoop"
		"Research Laboratory"
		"Salvage Scanner"
		"Anvil-Class Engine"
		"Crucible-Class Thruster"
		"Forge-Class Thruster"
		"Smelter-Class Thruster"
		"Crucible-Class Steering"
		"Forge-Class Steering"
		"Smelter-Class Steering"

mission "Remnant: Logistics Outfitter Delivery"
	name "Outfitter component delivery to <planet>"
	description `Outfitter repair crews on <planet> need <cargo> parts delivered. Logistics adjustment is <payment>.`
	cargo "remnant outfitter repair" 30 175
	job
	repeat
	to offer
		not "Remnant: Ssil Vida Active"
		not "flagship planet: Ssil Vida"
		has "Remnant: Logistics 1: done"
		has "license: Remnant"
		has "Remnant: Logistics Industrial Delivery: done" >= 9
		random < 30
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit 
		dialog phrase "generic cargo on visit"
	on complete
		dialog `A repair technician inspects the <cargo> parts and authorizes your payment of <payment>.`
		payment 30000 25

trade
	commodity "remnant salvage"
		"salvaged Builder"
		"Ka'het Nullifier"
		"Ka'het Ravager Beam"
		"Ka'het Ravager Turret"
		"Ka'het Annihilator"
		"Ka'het Annihilator Turret"
		"Annihilator Projectile"
		"Ka'het EMP Deployer"
		"Ka'het Emergency Deployer"
		"Ka'het Support Cooling"
		"Ka'het Primary Cooling"
		"Ka'het Shield Restorer"
		"Ka'het Grand Restorer"
		"Ka'het MHD Generator"
		"Ka'het Reserve Accumulator"
		"Maeri Engine Nacelles"
		"Ka'het Sustainer Nacelles"
		"Telis Engine Nacelles"
		"Vareti Engine Block"
		"Ka'het Compact Engine"
		"Candle Class Generator"
		"Furnace Class Generator"
		"Inferno Class Generator"
		"Plasma Core"
		"Double Plasma Core"
		"Triple Plasma Core"
		"small Systems Core"
		"medium Systems Core"
		"large Systems Core"
		"Fuel Processor"
		"Asteroid Class Thruster"
		"Comet Class Thruster"
		"Lunar Class Thruster"
		"Planetary Class Thruster"
		"Asteroid Class Steering"
		"Comet Class Steering"
		"Lunar Class Steering"
		"Planetary Class Steering"

mission "Remnant: Logistics Salvage Delivery"
	name "Outfitter salvage delivery to <planet>"
	description `Deliver <cargo> components from recent salvage operations to the outfitters on <planet> for research, refurbishment, or recycling. Logistics adjustment is <payment>.`
	cargo "remnant salvage" 5 100
	job
	repeat
	to offer
		not "Remnant: Ssil Vida Active"
		not "flagship planet: Ssil Vida"
		has "Remnant: Logistics 1: done"
		has "license: Remnant Capital"
		has "Remnant: Logistics Outfitter Delivery: done" >= 9
		random < 11
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit 
		dialog phrase "generic cargo on visit"
	on complete
		dialog `Two armed repair technicians inspects the <cargo> and authorize your payment of <payment>.`
		payment 50000 25

