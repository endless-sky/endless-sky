add_library(EndlessSkyLib OBJECT)

# Set the appropriate compiler flags.
target_include_directories(EndlessSkyLib PUBLIC "${LIBMAD_INCLUDE_DIR}")
if(MSVC)
	target_compile_options(EndlessSkyLib PUBLIC "/W3" "/permissive-" "/sdl" "/GR-" "/analyze-"
		"-Wno-nonportable-include-path" "$<$<CONFIG:Release>:/Gy;/Oi>")
	target_compile_definitions(EndlessSkyLib PUBLIC "_UNICODE" "UNICODE")
else()
	target_compile_options(EndlessSkyLib PUBLIC
		"-Wall" "-pedantic-errors" "-Wold-style-cast" "$<$<CONFIG:Release>:-fno-rtti>")
endif()

# Every source file (and header file) should be listed here, except main.cpp.
# If you add a new file, add it to this list.
target_sources(EndlessSkyLib PRIVATE
		ai/AI.cpp
		ai/AI.h
		player/Account.cpp
		player/Account.h
		hud/AlertLabel.cpp
		hud/AlertLabel.h
		hud/AmmoDisplay.cpp
		hud/AmmoDisplay.h
		util/Angle.cpp
		util/Angle.h
		ui/Animate.h
		ship/Armament.cpp
		ship/Armament.h
		system/AsteroidField.cpp
		system/AsteroidField.h
        ui/BankPanel.cpp
        ui/BankPanel.h
		util/Bitset.cpp
		util/Bitset.h
        ui/BoardingPanel.cpp
        ui/BoardingPanel.h
		ship/Body.cpp
		ship/Body.h
		hud/Camera.cpp
		hud/Camera.h
		ship/CaptureOdds.cpp
		ship/CaptureOdds.h
		ship/CargoHold.cpp
		ship/CargoHold.h
		ui/CategoryList.cpp
		ui/CategoryList.h
		ui/CategoryType.h
		ui/ClickZone.h
		collision/Collision.cpp
		collision/Collision.h
		collision/CollisionSet.cpp
		collision/CollisionSet.h
		collision/CollisionType.h
		util/Color.cpp
		util/Color.h
		ai/Command.cpp
		ai/Command.h
		conditions/ConditionAssignments.cpp
		conditions/ConditionAssignments.h
		conditions/ConditionEntry.cpp
		conditions/ConditionEntry.h
		conditions/ConditionSet.cpp
		conditions/ConditionSet.h
		conditions/ConditionsStore.cpp
		conditions/ConditionsStore.h
		mission/Conversation.cpp
		mission/Conversation.h
        ui/ConversationPanel.cpp
        ui/ConversationPanel.h
		player/CoreStartData.cpp
		player/CoreStartData.h
		util/CustomEvents.cpp
		util/CustomEvents.h
		collision/DamageDealt.h
		collision/DamageProfile.cpp
		collision/DamageProfile.h
		files/DataFile.cpp
		files/DataFile.h
		files/DataNode.cpp
		files/DataNode.h
		files/DataWriter.cpp
		files/DataWriter.h
		player/Date.cpp
		player/Date.h
		player/Depreciation.cpp
		player/Depreciation.h
		ui/Dialog.cpp
		ui/Dialog.h
		util/Dictionary.cpp
		util/Dictionary.h
		mission/DistanceCalculationSettings.h
		mission/DistanceCalculationSettings.cpp
		pathfinding/DistanceMap.cpp
		pathfinding/DistanceMap.h
		util/Distribution.cpp
		util/Distribution.h
		hud/Effect.cpp
		hud/Effect.h
		hud/Engine.cpp
		hud/Engine.h
		util/EsUuid.cpp
		util/EsUuid.h
		hud/EscortDisplay.cpp
		hud/EscortDisplay.h
		util/ExclusiveItem.h
		collision/FighterHitHelper.h
		files/Files.cpp
		files/Files.h
		ai/FireCommand.cpp
		ai/FireCommand.h
		fleet/Fleet.cpp
		fleet/Fleet.h
		fleet/FleetCargo.cpp
		fleet/FleetCargo.h
		hud/Flotsam.cpp
		hud/Flotsam.h
		ship/FormationPattern.cpp
		ship/FormationPattern.h
		ship/FormationPositioner.cpp
		ship/FormationPositioner.h
		hud/FrameTimer.cpp
		hud/FrameTimer.h
		system/Galaxy.cpp
		system/Galaxy.h
		mission/GameAction.cpp
		mission/GameAction.h
		files/GameData.cpp
		files/GameData.h
		mission/GameEvent.cpp
		mission/GameEvent.h
        ui/GameLoadingPanel.cpp
        ui/GameLoadingPanel.h
		player/Gamerules.cpp
		player/Gamerules.h
	GameVersion.cpp
	GameVersion.h
		ui/GameWindow.cpp
		ui/GameWindow.h
		government/Government.cpp
		government/Government.h
        ui/HailPanel.cpp
        ui/HailPanel.h
		ship/Hardpoint.cpp
		ship/Hardpoint.h
		system/Hazard.cpp
		system/Hazard.h
        ui/HiringPanel.cpp
        ui/HiringPanel.h
        ui/InfoPanelState.cpp
        ui/InfoPanelState.h
		ui/Information.cpp
		ui/Information.h
		ui/Interface.cpp
		ui/Interface.h
		ui/ItemInfoDisplay.cpp
		ui/ItemInfoDisplay.h
		ship/JumpType.h
		files/Logger.cpp
		files/Logger.h
        ui/LoadPanel.cpp
        ui/LoadPanel.h
		mission/LocationFilter.cpp
		mission/LocationFilter.h
        ui/LogbookPanel.cpp
        ui/LogbookPanel.h
        ui/MainPanel.cpp
        ui/MainPanel.h
        ui/MapDetailPanel.cpp
        ui/MapDetailPanel.h
        ui/MapOutfitterPanel.cpp
        ui/MapOutfitterPanel.h
        ui/MapPanel.cpp
        ui/MapPanel.h
        ui/MapPlanetCard.cpp
        ui/MapPlanetCard.h
        ui/MapSalesPanel.cpp
        ui/MapSalesPanel.h
        ui/MapShipyardPanel.cpp
        ui/MapShipyardPanel.h
		player/BookEntry.cpp
		player/BookEntry.h
        ui/MenuAnimationPanel.cpp
        ui/MenuAnimationPanel.h
        ui/MenuPanel.cpp
        ui/MenuPanel.h
		hud/Message.cpp
		hud/Message.h
        ui/MessageLogPanel.cpp
        ui/MessageLogPanel.h
		hud/Messages.cpp
		hud/Messages.h
		system/Minable.cpp
		system/Minable.h
		collision/MinableDamageDealt.h
		hud/MiniMap.cpp
		hud/MiniMap.h
		mission/Mission.cpp
		mission/Mission.h
		mission/MissionAction.cpp
		mission/MissionAction.h
		mission/MissionTimer.cpp
		mission/MissionTimer.h
        ui/MissionPanel.cpp
        ui/MissionPanel.h
		player/Mortgage.cpp
		player/Mortgage.h
		ui/MouseButton.h
		mission/NPC.cpp
		mission/NPC.h
		mission/NPCAction.cpp
		mission/NPCAction.h
		mission/News.cpp
		mission/News.h
		outfit/Outfit.cpp
		outfit/Outfit.h
		ui/OutfitInfoDisplay.cpp
		ui/OutfitInfoDisplay.h
        ui/OutfitterPanel.cpp
        ui/OutfitterPanel.h
        ui/Panel.cpp
        ui/Panel.h
		text/Paragraphs.cpp
		text/Paragraphs.h
		fleet/Person.cpp
		fleet/Person.h
		fleet/Personality.cpp
		fleet/Personality.h
		text/Phrase.cpp
		text/Phrase.h
		system/Planet.cpp
		system/Planet.h
		hud/PlanetLabel.cpp
		hud/PlanetLabel.h
        ui/PlanetPanel.cpp
        ui/PlanetPanel.h
		player/PlayerInfo.cpp
		player/PlayerInfo.h
        ui/PlayerInfoPanel.cpp
        ui/PlayerInfoPanel.h
		files/Plugins.cpp
		files/Plugins.h
		util/Point.cpp
		util/Point.h
		government/Politics.cpp
		government/Politics.h
		system/Port.cpp
		system/Port.h
		player/Preferences.cpp
		player/Preferences.h
        ui/PreferencesPanel.cpp
        ui/PreferencesPanel.h
		files/PrintData.cpp
		files/PrintData.h
		outfit/Projectile.cpp
		outfit/Projectile.h
		hud/Radar.cpp
		hud/Radar.h
		fleet/RaidFleet.cpp
		fleet/RaidFleet.h
		util/Random.cpp
		util/Random.h
		util/RandomEvent.h
		util/Rectangle.cpp
		util/Rectangle.h
		ui/RenderBuffer.cpp
		ui/RenderBuffer.h
		pathfinding/RouteEdge.cpp
		pathfinding/RouteEdge.h
		pathfinding/RoutePlan.cpp
		pathfinding/RoutePlan.h
		system/Sale.h
		files/SavedGame.cpp
		files/SavedGame.h
		ui/Screen.cpp
		ui/Screen.h
		ui/ScrollBar.cpp
		ui/ScrollBar.h
		ui/ScrollVar.h
		util/Set.h
		ship/Ship.cpp
		ship/Ship.h
		system/Shop.h
		ship/ShipEvent.cpp
		ship/ShipEvent.h
        ui/ShipInfoDisplay.cpp
        ui/ShipInfoDisplay.h
        ui/ShipInfoPanel.cpp
        ui/ShipInfoPanel.h
		ship/ShipJumpNavigation.cpp
		ship/ShipJumpNavigation.h
		ship/ShipManager.cpp
		ship/ShipManager.h
		ui/ShipNameDialog.cpp
		ui/ShipNameDialog.h
		ui/ShipyardPanel.cpp
		ui/ShipyardPanel.h
		ui/ShopPanel.cpp
		ui/ShopPanel.h
		ui/SpaceportPanel.cpp
		ui/SpaceportPanel.h
		player/StartConditions.cpp
		player/StartConditions.h
		ui/StartConditionsPanel.cpp
		ui/StartConditionsPanel.h
		system/StellarObject.cpp
		system/StellarObject.h
		util/StringInterner.cpp
		util/StringInterner.h
		util/Swizzle.cpp
		util/Swizzle.h
		system/System.cpp
		system/System.h
		player/SystemEntry.h
		files/TaskQueue.cpp
		files/TaskQueue.h
		ui/TextArea.cpp
		ui/TextArea.h
		text/TextReplacements.cpp
		text/TextReplacements.h
		ui/Tooltip.cpp
		ui/Tooltip.h
		system/Trade.cpp
		system/Trade.h
		ui/TradingPanel.cpp
		ui/TradingPanel.h
		ui/UI.cpp
		ui/UI.h
		files/UniverseObjects.cpp
		files/UniverseObjects.h
		fleet/Variant.cpp
		fleet/Variant.h
		hud/Visual.cpp
		hud/Visual.h
		outfit/Weapon.cpp
		outfit/Weapon.h
		system/Weather.cpp
		system/Weather.h
		util/WeightedList.h
		system/Wormhole.cpp
		system/Wormhole.h
		pathfinding/WormholeStrategy.h
		files/ZipFile.cpp
		files/ZipFile.h
		shader/opengl.cpp
		shader/opengl.h
		util/pi.h
		util/shift.h
	audio/Audio.cpp
	audio/Audio.h
	audio/Music.cpp
	audio/Music.h
	audio/Sound.cpp
	audio/Sound.h
	audio/SoundCategory.h
	audio/player/AudioPlayer.cpp
	audio/player/AudioPlayer.h
	audio/player/MusicPlayer.cpp
	audio/player/MusicPlayer.h
	audio/supplier/AsyncAudioSupplier.cpp
	audio/supplier/AsyncAudioSupplier.h
	audio/supplier/AudioSupplier.cpp
	audio/supplier/AudioSupplier.h
	audio/supplier/FlacSupplier.cpp
	audio/supplier/FlacSupplier.h
	audio/supplier/Mp3Supplier.cpp
	audio/supplier/Mp3Supplier.h
	audio/supplier/WavSupplier.cpp
	audio/supplier/WavSupplier.h
	audio/supplier/effect/Fade.cpp
	audio/supplier/effect/Fade.h
	comparators/ByDisplayName.h
	comparators/ByGivenOrder.h
	comparators/ByName.h
	comparators/BySeriesAndIndex.h
	comparators/ByUUID.h
	orders/OrderSet.cpp
	orders/OrderSet.h
	orders/OrderSingle.cpp
	orders/OrderSingle.h
	orders/Orders.cpp
	orders/Orders.h
	image/BlendingMode.h
	image/ImageBuffer.cpp
	image/ImageBuffer.h
	image/ImageFileData.cpp
	image/ImageFileData.h
	image/ImageSet.cpp
	image/ImageSet.h
	image/Mask.cpp
	image/Mask.h
	image/MaskManager.cpp
	image/MaskManager.h
	image/Sprite.cpp
	image/Sprite.h
	image/SpriteSet.cpp
	image/SpriteSet.h
	shader/BatchDrawList.cpp
	shader/BatchDrawList.h
	shader/BatchShader.cpp
	shader/BatchShader.h
	shader/DrawList.cpp
	shader/DrawList.h
	shader/FillShader.cpp
	shader/FillShader.h
	shader/FogShader.cpp
	shader/FogShader.h
	shader/LineShader.cpp
	shader/LineShader.h
	shader/OutlineShader.cpp
	shader/OutlineShader.h
	shader/PointerShader.cpp
	shader/PointerShader.h
	shader/RingShader.cpp
	shader/RingShader.h
	shader/Shader.cpp
	shader/Shader.h
	shader/SpriteShader.cpp
	shader/SpriteShader.h
	shader/StarField.cpp
	shader/StarField.h
		ai/ShipAICache.cpp
		ai/ShipAICache.h
	test/Test.cpp
	test/Test.h
	test/TestContext.cpp
	test/TestContext.h
	test/TestData.cpp
	test/TestData.h
	text/Alignment.h
	text/Clipboard.cpp
	text/Clipboard.h
	text/DisplayText.cpp
	text/DisplayText.h
	text/Font.cpp
	text/Font.h
	text/FontSet.cpp
	text/FontSet.h
	text/Format.cpp
	text/Format.h
	text/Layout.h
	text/Table.cpp
	text/Table.h
	text/Truncate.h
	text/Utf8.cpp
	text/Utf8.h
	text/WrappedText.cpp
	text/WrappedText.h
)

if(WIN32)
	target_sources(EndlessSkyLib PRIVATE
		windows/TimerResolutionGuard.cpp
		windows/TimerResolutionGuard.h
		windows/WinConsole.cpp
		windows/WinConsole.h
		windows/WinVersion.cpp
		windows/WinVersion.h
		windows/WinWindow.cpp
		windows/WinWindow.h
	)
endif()
